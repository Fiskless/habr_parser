# Парсинг сайта Хабр

Данный скрипт парсит данные пользователей с сайта [Хабр](https://career.habr.com/) и сохраняет результаты в csv файлы и на гугл-диск в папку `Страницы с Хабра`. 


## Запуск

### Инструкция по запуску скриптов

Для запуска скрипта у вас уже должен быть установлен Python 3.

- Скачайте код
- Установите зависимости командой 
    ```sh
    pip install -r requirements.txt
    ```
- Запустите скрипт: 
    ```sh
    python3 habr_parser.py
    ```
  
### Переменные окружения

Часть настроек проекта берётся из переменных окружения. 
Чтобы их определить, создайте файл `.env` рядом с `habr_parser.py` 
и запишите туда данные в таком формате: `ПЕРЕМЕННАЯ=значение`.

Используются следующие переменные окружения: 
- `SOCKS5_PROXY` — прокси-сервер, который используется для парсинга. По умолчанию `None`.
Примерный вид: `socks5://login:password@111.111.111.111:8080`
- `UPLOAD_TO_GOOGLE_DRIVE` - если True, то результаты парсинга будут загружены 
на гугл диск, если False, то не будут. По умолчанию значение True.



## Дополнительные возможности

### Возможности скрипта habr_parser.py

В скрипте реализована возможность задавать url к файлу, в котором находятся 
ссылки на пользователей, а также задавать путь, по которому сохранять результаты парсинга. 
Это реализовано с помощью библиотеки argparse, добавлено 2 аргумента:
- `--csv_url` - url на csv-файл, в котором находятся ссылки на страницы пользователей, которые будет парсить скрипт. По умолчания используется [данный файл](https://drive.google.com/file/d/1iHlRsw2QV-9asGpQDWEQ9kCp3UmoQs7n/view).
- `--dest_folder` - необходимо указать свой путь к каталогу на ПК, в который сохранить результаты парсинга. По умолчанию используется текущая директория проекта.

Для использования необходимо при запуске скрипта в терминале указать 2 этих параметра, например: 
```sh
python3 main.py --csv_url https://drive.google.com/file/d/432jlk4j23lk4j32lk4j32l4k23jkl4/view --dest_folder some_directory
```

Также при работе скрипта создается файл, `Ошибка при парсинге.csv`. 
В нем собраны страницы, которые не удалось распарсить. Состоит из 2 колонок: 
url пользователя и ошибка, которая возникла при парсинге. Если ошибок нет, то файл
удаляется по завершении работы скрипта.

Для выгрузки файлов в [гугл диск](https://drive.google.com/drive/my-drive) 
необходимо получить файл `client_secrets.json`, а также активировать `Google Drive API`.
Подробная инструкция показана в [видео](https://youtu.be/QxVl8m54vnk?t=94).

## Используемые технологии
python3, argparse, BeautifulSoup, requests, environs, Google Drive API